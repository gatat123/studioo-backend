# Railway Deployment Checklist

## ‚úÖ Completed Steps

1. **GitHub Repositories**
   - ‚úÖ Backend repository: https://github.com/gatat123/studioo-backend
   - ‚úÖ Frontend repository: https://github.com/gatat123/Studioo
   - ‚úÖ Both repositories pushed with latest code

2. **Backend Configuration**
   - ‚úÖ Health check endpoint added (`/api/health`)
   - ‚úÖ Railway.json configuration file
   - ‚úÖ Package.json scripts updated for production
   - ‚úÖ Prisma schema configured
   - ‚úÖ Socket.io server integrated

3. **Frontend Configuration**
   - ‚úÖ Railway.json configuration file
   - ‚úÖ Environment variables template

4. **Documentation**
   - ‚úÖ CLAUDE.md for AI assistance
   - ‚úÖ RAILWAY_SETUP.md for deployment guide
   - ‚úÖ README files for both repositories

## üîß Required Actions in Railway Dashboard

### 1. Create PostgreSQL Database
```
1. Go to Railway project dashboard
2. Click "New Service" ‚Üí "Database" ‚Üí "PostgreSQL"
3. Wait for database to provision
4. DATABASE_URL will be automatically available
```

### 2. Configure Backend Service

#### Connect GitHub Repository:
```
1. Go to backend service settings
2. Connect GitHub repo: gatat123/studioo-backend
3. Set deploy branch: main
4. Enable auto-deploy
```

#### Add Environment Variables:
```env
DATABASE_URL=(auto-generated by Railway)
NEXTAUTH_URL=https://studioo-backend-production.up.railway.app
NEXTAUTH_SECRET=(generate with: openssl rand -base64 32)
JWT_SECRET=(generate with: openssl rand -base64 32)
PORT=3001
HOSTNAME=0.0.0.0
NODE_ENV=production
SOCKET_PORT=3001
SOCKET_PATH=/socket.io
STORAGE_TYPE=local
UPLOAD_DIR=/app/uploads
MAX_FILE_SIZE=10485760
ADMIN_EMAIL=your-email@example.com
ADMIN_DEFAULT_PASSWORD=SecurePassword123!
CORS_ORIGIN=https://studioo-production.up.railway.app
CLIENT_URL=https://studioo-production.up.railway.app
```

### 3. Configure Frontend Service

#### Create New Service:
```
1. Click "New Service" ‚Üí "GitHub Repo"
2. Connect: gatat123/Studioo
3. Set deploy branch: main
4. Enable auto-deploy
```

#### Add Environment Variables:
```env
NEXT_PUBLIC_API_URL=https://studioo-backend-production.up.railway.app
NEXT_PUBLIC_SOCKET_URL=https://studioo-backend-production.up.railway.app
NEXTAUTH_URL=https://studioo-production.up.railway.app
NODE_ENV=production
```

## üöÄ Deployment Commands

### Generate Secrets:
```bash
# For NEXTAUTH_SECRET
openssl rand -base64 32

# For JWT_SECRET  
openssl rand -base64 32
```

### Manual Database Migration (if needed):
```bash
# Using Railway CLI
cd backend
railway link
railway run npx prisma migrate deploy
```

## üîç Verification Steps

1. **Check Backend Health:**
   ```
   https://studioo-backend-production.up.railway.app/api/health
   ```

2. **Check Socket.io Status:**
   ```
   https://studioo-backend-production.up.railway.app/api/socket
   ```

3. **Check Frontend:**
   ```
   https://studioo-production.up.railway.app
   ```

## ‚ö†Ô∏è Common Issues & Solutions

### Database Connection Error
- Ensure DATABASE_URL is set in backend service
- Check PostgreSQL service is running
- Run migrations: `railway run npx prisma migrate deploy`

### CORS Error
- Verify CORS_ORIGIN and CLIENT_URL match frontend URL exactly
- Check NEXT_PUBLIC_API_URL in frontend

### Socket.io Connection Failed
- Ensure NEXT_PUBLIC_SOCKET_URL is correct
- Check SOCKET_PORT is set to 3001
- Verify WebSocket support in Railway

### Build Failures
- Check build logs in Railway dashboard
- Ensure all dependencies are in package.json
- Verify Node.js version compatibility

## üìä Monitoring

- **Logs**: Railway Dashboard ‚Üí Service ‚Üí Logs
- **Metrics**: Railway Dashboard ‚Üí Service ‚Üí Metrics
- **Deployments**: Railway Dashboard ‚Üí Service ‚Üí Deployments

## üîÑ Update Process

1. Make changes locally
2. Test thoroughly
3. Commit and push to GitHub
4. Railway auto-deploys from GitHub
5. Monitor deployment logs
6. Verify application functionality

## üìû Support Resources

- Railway Documentation: https://docs.railway.app
- Railway Status: https://status.railway.app
- Project Dashboard: https://railway.com/project/07c7df00-6cac-4404-9418-444134f717fe